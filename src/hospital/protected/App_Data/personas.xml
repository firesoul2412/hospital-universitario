<?xml version="1.0" encoding="utf-8" ?>

<sqlMapConfig>

	<select id="autenticacion" resultClass="int">
		SELECT count(*) from usuario where login = #login# and clave = md5(#password#)
	</select>

    <insert id="CrearPersona" parameterClass="Persona">
    	INSERT INTO Persona ( cedula, nombre, apellido, fechaNacimiento, telefono, direccion )
  		VALUES ( #cedula#, #nombre#, #apellido#, #fechaNacimiento#, #telefono#, #direccion# )
    </insert>
  
    <insert id="CrearEmpleado" parameterClass="Empleado">
  		INSERT INTO Empleado ( idPersona, idCargo, idTipoEmpleado, idDependencia, idUsuario )
  		VALUES ( #idPersona#, #idCargo#, #idTipoEmpleado#, #idDependencia#, #idUsuario# )
    </insert>
  
    <insert id="CrearPaciente" parameterClass="Paciente">
  		INSERT INTO Paciente ( idPersona, idHistoriaClinica )
  		VALUES ( #idPersona#, #idHistoriaClinica# )
    </insert>
  
    <insert id="CrearUsuario" parameterClass="Usuario">
    	INSERT INTO Usuario ( login, clave )
    	VALUES ( #login#, #clave# )
    </insert>
  
    <update id="ActualizarPersona" parameterClass="Persona">
  		UPDATE Persona
  		SET
  			cedula = #cedula#,
  			nombre = #nombre#,
  			apellido = #apellido#,
  			fechaNacimiento = #fechaNacimiento#,
  			telefono = #telefono#,
  			direccion = #direccion#
  		WHERE 
  			id = #id#
    </update>
  
    <update id="ActualizarEmpleado" parameterClass="Empleado">
  		UPDATE Empleado
  		SET
  			idPersona = #idPersona#,
  			idCargo = #idCargo#,
  			idTipoEmpleado = #idTipoEmpleado#,
  	  		idDependencia = #idDependencia#,
  	  		idUsuario = #idUsuario#
  		WHERE 
  	  		id = #id#
    </update>
  
    <update id="ActualizarPaciente" parameterClass="Paciente">
  		UPDATE Paciente
  		SET
  	  		idPersona = #idPersona#,
  	  		idHistoriaClinica = #idHistoriaClinica#
  		WHERE
  	  		id = #id#
    </update>
  
    <update id="ActualizarUsuario" parameterClass="Usuario">
  		UPDATE Usuario
  		SET
  	  		login = #login#,
  	  		clave = #clave#
  		WHERE
  	  		id = #id#
    </update>
  
    <delete id="Delete" parameterClass="int">
     delete from PERSON
     where PER_ID = #value#
    </delete>

</sqlMapConfig>

